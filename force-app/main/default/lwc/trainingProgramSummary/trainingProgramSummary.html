<template>
  <lightning-card title="Training Program Summary" icon-name="custom:custom19">
      <!-- Action Buttons with Filter Options -->
      <div class="action-buttons">
        <button class="action-button" onclick={handleWeekFilter}>Week</button>
        <button class="action-button" onclick={handleMonthFilter}>Month</button>
        <button class="action-button" onclick={handleQuarterFilter}>Quarter</button>
        <button class="action-button" onclick={handleRefresh}>Refresh</button>
      </div>

      <!-- Inline Display for Interns, Phases, and Exam Schedules -->
      <lightning-card title="Interns List" icon-name="standard:user">
          <template if:true={hasInterns}>
              <ul class="slds-list_dotted">
                  <!-- Loop through the interns list and display each intern -->
                  <template for:each={interns} for:item="intern">
                      <li key={intern.Id} class="slds-item">
                          <div class="slds-box slds-box_xx-small slds-m-bottom_medium">
                              <p><strong>Name:</strong> {intern.Name}</p>
                              <p><strong>Asset Assigned:</strong> {intern.Asset_assign__c}</p>
                              <p><strong>Department:</strong> {intern.Department__c}</p>
                              <p><strong>Program Name:</strong> {intern.Program__r.Name}</p>
                              <p><strong>Program Duration:</strong> {intern.Program_Duration__c} months</p>
                              <p><strong>Goals Achieved:</strong> {intern.Goals_Achieved__c}</p>
                          </div>
                      </li>
                  </template>
              </ul>
          </template>
          <template if:false={hasInterns}>
              <p>No interns found for this training program.</p>
          </template>
      </lightning-card>
    
      
        
        <!-- Exam Schedules Section -->
          <h3 class="">Exam Schedules</h3>
          <template if:true={filteredSchedules}>
            <table class="slds-table slds-table_cell-buffer slds-table_bordered">
              <thead>
                  <tr>
                      <th class="slds-text-title_caps">Exam Name</th>
                      <th class="slds-text-title_caps">Assigned To</th>
                      <th class="slds-text-title_caps">Current Period {currentPeriodRange}</th>
                      <th class="slds-text-title_caps">Next Period {nextPeriodRange}</th>
                      <th class="slds-text-title_caps">Ongoing {ongoingPeriodRange}</th>
                  </tr>
              </thead>
              <tbody>
                  <!-- Loop through filteredSchedules -->
                  <template for:each={filteredSchedules} for:item="schedule">
                      <tr key={schedule.Id}>
                          <td>{schedule.Name}</td>
                          <td>{schedule.Assigned_To__r.Name}</td>

                          <!-- Current Period -->
                          <td>
                              <template if:true={schedule.isInCurrentPeriod}>
                                  <p>{schedule.Scheduled_Date__c}</p>
                              </template>
                          </td>

                          <!-- Next Period -->
                          <td>
                              <template if:true={schedule.isInNextPeriod}>
                                  <p>{schedule.Scheduled_Date__c}</p>
                              </template>
                          </td>

                          <!-- Ongoing -->
                          <td>
                              <template if:true={schedule.isOngoing}>
                                  <p>{schedule.Scheduled_Date__c}</p>
                              </template>
                          </td>
                      </tr>
                  </template>
              </tbody>
            </table>
          </template>

      </div>
  </lightning-card>
</template>
